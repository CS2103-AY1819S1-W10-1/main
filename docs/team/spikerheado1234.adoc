= Ahan Gupta - Project Portfolio
:site-section: AboutUs
:imagesDir: ../images
:stylesDir: ../stylesheets

== PROJECT: AddressBook - Level 4

---

== Overview

TheTracker is an application specifically built for NUS students. Allowing a student to keep track of his/her own occasions, modules and keep up to date with his/her friends.

== Summary of contributions

* *Major enhancement*: added *the multi-panel UI*
** What it does: Allows the user to switch in between module, person and occasion tabs. To allow a user to, conveniently, his/her modules and occasions.
** Justification: This feature improves the product significantly as the user can now conveniently have a consolidated place where he/she can find information on his existing modules and occasions.
** Highlights: This enhancement affects existing commands and commands to be added in future. As they must have to ability to render changes to this new UI. The implementation was also extremely challenging as the underlying structure of the previous UI had to be changed significantly.
** Credits: _{All abstractions, logic was conceived of solely by me, whilst the design of the new UI was a group effort}_

* *Minor enhancement*: Designed and implemented the new Tagging System that uses a dynamic key/value mapping enabling the user to find by certain attributes.

* *Code contributed*: [https://github.com/CS2103-AY1819S1-W10-1/main/blob/master/src/main/java/seedu/address/ui/MainWindow.java[Functional code]] [https://github.com/CS2103-AY1819S1-W10-1/main/blob/master/src/test/java/guitests/guihandles/MainMenuHandle.java[Test code]]

* *Other contributions*:

** Project management:
*** Managed releases `v1.1` - `v1.2` (2 releases) on GitHub
*** Managed Pull Request to upstream CS2103 Main Repo for assessment by tutors.
** Tools:
*** Integrated Travis CI into the repo.

== Contributions to the User Guide


|===
|_Given below are sections I contributed to the User Guide. They showcase my ability to write documentation targeting end-users._
|===

== Contributions to the Developer Guide

|===
|_Given below are sections I contributed to the Developer Guide. They showcase my ability to write technical documentation and the technical depth of my contributions to the project._
|===

=== InsertPerson feature
The `InsertPerson` command is an advanced feature for TheTracker. It enables a bi-directional insert of a Person into
either one of a `module` or an `occasion`.

====  Current Implementation
To enable this feature to exist, the underlying structure between the entities `Person`, `Module` and `Occasion` have to
be linked in a manner that will facilitate injections of one entity bi-directionally into another. The following class diagram
depicts this new structure:

image::PersonModuleOccasionClassDiagram.png[width="800"]

For the following example we will use `InsertPerson` command to insert a `person`, bi-directionally, into a `module`.
The usage for a bi-directional insert into an `occasion` is similar.

`InsertPerson` command extends the `Command` class and uses inheritance to facilitate implementation. It's mechanism is
facilitated by `VersionAddressBook`. Below is the associated sequence diagram for the `InsertPerson` command:

image::InsertPersonSequenceDiagram.png[width="800"]

When the user first opens up `TheTracker` it loads up an instance of a `VersionAddressBook` and initializes
the `currentStatePointer` to point at this instance of the `TheTracker`. When the user then executes the `InsertPerson`
command an entirely new copy of the state of `TheTracker` is created and inserted as a new `VersionAddressBook` with the
currentStatePointer being updated. Below is a diagram that depicts this:

image::InsertPersonStatePointerDiagram.png[width="800"]

The following steps represent the internal implementation of the `InsertPerson` command when inserting a `Person` into a `Module`:

* Create a `DeepDuplicate` and a `ShallowDuplicate` of the Both the `Person` and the `Module`
* Insert the `ShallowDuplicate` of the module into the `DeepDuplicate` of the `Person's` `UniqueModuleList`
* Insert the `ShallowDuplicate` of the person into the `DeepDuplicate` of the `Module's` `UniquePersonsList`

Note: Further elaboration of the above implementation is discussed within the `Design Considerations` section.

==== Design Considerations

Why it is non-trivial:

* For the feature to work coherently with `undo`/`redo` as well as `edit` an entire new replica of state
of `TheTracker` must be created with the relevant entities bi-directionally inserted after this command has been executed.
In accordance with this logic, two such methods were introduced to facilitate this feature's functionality. The first is
the method `makeDeepDuplicate`, the following class diagram shows how the method works in relation to calling `makeDeepDuplicate`
on a person:

image::PersonMakeDeepDuplicate.png[width="800"]

The method merely makes an entirely new copy of a `Person`/`Module`/`Occasion` by copying by `value` all of its predecessor's
attributes. We cannot, however, make do with only `makeDeepDuplicate` in order to implement the `InsertPerson` feature.
The following scenario illustrates why:

* Insertion of `Person` `x` into `Occasion` `y` would cause `x's` occasion list to be populated by `y` and `y's` person list
to be populated by `x`
* Insertion of `Person` `x` into `Module` `z` would cause `x's` module list to be populated by `z` and `z's` person list
to be populated by `x`. But if we insert a deep copy of `x` into `z` this would entail us replicating `y`, which would entail
us replicating the person list of `y` and, thus, `x` and so the program will halt in an infinite regress until a
`StackOverFlow` is thrown.

To counter this, we have implemented a `makeShallowDuplicate` which replicates an entity, but with an empty list. For example,
calling `makeShallowDuplicate` on a `Person` would have the following effect:

image::PersonMakeShallowDuplicate.png[width="800"]

Upon insertion of a `Module` into a `Person` the respective `Module's` `ShallowDuplicate` is inserted to avoid this
error.

[[Design-Ui]]
=== UI component

.Structure of the UI Component
image::UiClassDiagram.png[width="800"]

*API* : link:{repoURL}/src/main/java/seedu/address/ui/Ui.java[`Ui.java`]

The `MainWindow` is made up of parts e.g.`CommandBox`, `ResultDisplay`, `PersonListPanel`, `StatusBarFooter`, `BrowserPanel` etc. All these, including the `MainWindow`, inherit from the abstract `UiPart` class.

The `UI` component uses JavaFx UI framework. The layout of these UI parts are defined in matching `.fxml` files that are in the `src/main/resources/view` folder. For example, the layout of the link:{repoURL}/src/main/java/seedu/address/ui/MainWindow.java[`MainWindow`] is specified in link:{repoURL}/src/main/resources/view/MainWindow.fxml[`MainWindow.fxml`]

The `UI` component,

* Executes user commands using the `Logic` component.
* Binds itself to some data in the `Model` so that the UI can auto-update when data in the `Model` change.
* Responds to events raised from various parts of the App and updates the UI accordingly.

include::../DeveloperGuide.adoc[tag=dataencryption]
